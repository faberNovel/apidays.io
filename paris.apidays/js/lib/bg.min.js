/* author El mansouri Abdelilah */
var i;
var l = 10;
var paths = [];
var center = view.center;
for (i = 0; i < l; i++) {
    //var size = 3+15 * Math.random();
		paths[i] = new Raster('icon'+i);

    paths[i].rotate((360 / l) * i);
    paths[i].randomX = 3 + Math.random() * 30;
    paths[i].randomY = 3 + Math.random() * 30;
    paths[i].speedX = 0.5 + Math.random() * 2;
    paths[i].speedY = 0.5 + Math.random() * 2;
    paths[i].speedR = 0.1 + Math.random() * 0.4;
    paths[i].posY = 100 + Math.random() * $(window).height() * 3.5;
    paths[i].offsetY = 0;

}

var top = 0;
function onFrame(event) {
		top += ($(window).scrollTop() - top) * 0.5;
		for (i = 0; i < l; i++) {
			var a = Math.sin(event.time * paths[i].speedX + i);
      var c = Math.cos(event.time * paths[i].speedY + i);
      if (i * 0.5 == parseInt(i * 0.5)) {
          paths[i].rotate(paths[i].speedR)
      } else {
          paths[i].rotate(-paths[i].speedR)
      }
      paths[i].offsetY -= 0.8;
      
      paths[i].position.x = (($(window).width()) / l) * i + a * paths[i].randomX;
     	paths[i].position.y = paths[i].posY + c * paths[i].randomY - top + paths[i].offsetY;

			if (paths[i].position.y + $(window).scrollTop() < -100) {
          paths[i].offsetY = $(window).height() + $(window).scrollTop() + 100
      }
		}
}
		